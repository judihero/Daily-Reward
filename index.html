<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Reward Check-in</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- New Heading for Daily Rewards -->
        <h1 class="title">Daily Rewards</h1> <!-- Added title here -->
        
    <!-- Current Points Section -->
    <div class="points-section">
        <h2>Current point</h2>
        <p id="points">0</p>
    </div>

    <!-- Check-In Items -->
    <div class="checkin-grid">
        <div class="checkin-container">
            <div class="checkin-item" onclick="addPoints(1)">
                <img src="https://static.gwvkyk.com/media/7df13490283761780a7bd.png" alt="Check-in Icon">
                <span>+1</span>
            </div>
            <p class="day-label">Day 1</p>
        </div>
        <div class="checkin-container">
            <div class="checkin-item" onclick="addPoints(2)">
                <img src="https://static.gwvkyk.com/media/7df13490283761780a7bd.png" alt="Check-in Icon">
                <span>+2</span>
            </div>
            <p class="day-label">Day 2</p>
        </div>
        <div class="checkin-container">
            <div class="checkin-item" onclick="addPoints(3)">
                <img src="https://static.gwvkyk.com/media/7df13490283761780a7bd.png" alt="Check-in Icon">
                <span>+3</span>
                </div>
            <p class="day-label">Day 3</p>
        </div>
        <div class="checkin-container">
            <div class="checkin-item" onclick="addPoints(4)">
                <img src="https://static.gwvkyk.com/media/7df13490283761780a7bd.png" alt="Check-in Icon">
                <span>+4</span>
                </div>
            <p class="day-label">Day 4</p>
        </div>
        <div class="checkin-container">
            <div class="checkin-item" onclick="addPoints(5)">
                <img src="https://static.gwvkyk.com/media/7df13490283761780a7bd.png" alt="Check-in Icon">
                <span>+5</span>
                </div>
            <p class="day-label">Day 5</p>
        </div>
        <div class="checkin-container">
            <div class="checkin-item" onclick="addPoints(6)">
                <img src="https://static.gwvkyk.com/media/7df13490283761780a7bd.png" alt="Check-in Icon">
                <span>+6</span>
                </div>
            <p class="day-label">Day 6</p>
        </div>
        <div class="checkin-container">
            <div class="checkin-item" onclick="addPoints(7)">
                <img src="https://static.gwvkyk.com/media/7df13490283761780a7bd.png" alt="Check-in Icon">
                <span>+7</span>
                </div>
            <p class="day-label">Day 7</p>
        </div>
    </div>

    <!-- Check In Today Button -->
    <button class="checkin-button">Check In Today</button>

    <!-- Rewards Section -->
    <div id="rewards-section" class="rewards-section">
        <div class="reward-item">
            <img src="https://static.gwvkyk.com/media/a3e09de073376d7f96065.jpg" alt="Wallet Angpow">
            <div>
                <p>Wallet Angpow</p>
                <p>RM 8</p>
            </div>
            <div class="reward-points">35 Points</div>
        </div>
        <div class="reward-item">
            <img src="https://static.gwvkyk.com/media/a3e09de073376d7f96065.jpg" alt="Wallet Angpow">
            <div>
                <p>Wallet Angpow</p>
                <p>RM 18</p>
            </div>
            <div class="reward-points">50 Points</div>
        </div>
        <!-- Add more rewards as needed -->
        <!-- Additional Rewards -->
    <div class="reward-item">
        <img src="https://static.gwvkyk.com/media/a3e09de073376d7f96065.jpg" alt="Wallet Angpow">
        <div>
            <p>Wallet Angpow</p>
            <p>RM 28</p>
        </div>
        <div class="reward-points">65 Points</div>
    </div>

    <div class="reward-item">
        <img src="https://static.gwvkyk.com/media/a3e09de073376d7f96065.jpg" alt="Wallet Angpow">
        <div>
            <p>Wallet Angpow</p>
            <p>RM 38</p>
        </div>
        <div class="reward-points">74 Points</div>
    </div>

    <div class="reward-item">
        <img src="https://static.gwvkyk.com/media/a3e09de073376d7f96065.jpg" alt="Wallet Angpow">
        <div>
            <p>Wallet Angpow</p>
            <p>RM 58</p>
        </div>
        <div class="reward-points">95 Points</div>
    </div>

    <div class="reward-item">
        <img src="https://static.gwvkyk.com/media/a3e09de073376d7f96065.jpg" alt="Wallet Angpow">
        <div>
            <p>Wallet Angpow</p>
            <p>RM 88</p>
        </div>
        <div class="reward-points">110 Points</div>
    </div>

    <!-- High-Value Rewards -->
    <div class="reward-item">
        <img src="https://static.gwvkyk.com/media/1512d64a73376b9e99643.png" alt="Cash Voucher">
        <div>
            <p>Cash Voucher</p>
            <p>RM 188</p>
        </div>
        <div class="reward-points">600 Points</div>
    </div>

    <div class="reward-item">
        <img src="https://static.gwvkyk.com/media/1512d64a73376b9e99643.png" alt="Cash Voucher">
        <div>
            <p>Cash Voucher</p>
            <p>RM 288</p>
        </div>
        <div class="reward-points">850 Points</div>
    </div>

    <div class="reward-item">
        <img src="https://static.gwvkyk.com/media/7bd77eaa73376c8a3516c.png" alt="Apple AirPods">
        <div>
            <p>Apple</p>
            <p>AirPods</p>
        </div>
        <div class="reward-points">1500 Points</div>
    </div>

    <div class="reward-item">
        <img src="https://static.gwvkyk.com/media/432756ea73376f5f91903.webp" alt="Apple iPhone">
        <div>
            <p>Apple</p>
            <p>iPhone 16 Pro Max</p>
        </div>
        <div class="reward-points">2350 Points</div>
</div>
    </div>
</div>

<!-- Place the JavaScript code here, before the closing </body> tag -->
    <script>
        const ACCESS_ID = '254560538';  // Replace with your actual Access ID
        const TOKEN = '03e729dbdf5db7c33d824bf8288e10a240b433a989b91d44d0e9c214cd2c051b';  // Replace with your actual Access Token

        async function fetchUserData() {
    console.log('Attempting to fetch user data using POST request...');
    try {
        const formdata = new FormData();
        formdata.append("module", "module"); // Replace with the appropriate module name
        formdata.append("accessId", ACCESS_ID);
        formdata.append("accessToken", TOKEN);

        const requestOptions = {
            method: 'POST',
            body: formdata,
            redirect: 'follow'
        };

        const response = await fetch("https://jdk88a.com/api/v1/index.php", requestOptions);

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();
        console.log('API response:', result);

        // Check if rewards exist and call populateRewards
        if (result.rewards) {
            console.log('Calling populateRewards with:', result.rewards);
            populateRewards(result.rewards);
        } else {
            console.warn('No rewards data found in the API response');
        }

        // Update points
        document.getElementById('points').innerText = result.points || '0';

    } catch (error) {
        console.error('Failed to fetch user data:', error);
        document.getElementById('points').innerText = 'Error';
    }
}


function populateRewards(rewards) {
    const rewardsSection = document.getElementById('rewards-section');

    // Ensure the rewards-section exists
    if (!rewardsSection) {
        console.error('No element with id "rewards-section" found in the DOM');
        return;
    }

    // Validate the rewards data
    if (!rewards || !Array.isArray(rewards)) {
        console.warn('Invalid rewards data:', rewards);
        rewardsSection.innerHTML = '<p>No rewards available</p>';
        return;
    }

    // Clear existing rewards
    rewardsSection.innerHTML = '';

    // Render rewards
    rewards.forEach(reward => {
        const rewardItem = document.createElement('div');
        rewardItem.classList.add('reward-item');
        rewardItem.innerHTML = `
            <img src="${reward.image}" alt="${reward.name}">
            <div>
                <p>${reward.name}</p>
                <p>${reward.value}</p>
            </div>
            <div class="reward-points">${reward.points} Points</div>
        `;
        rewardsSection.appendChild(rewardItem);
    });
}

        function checkIn() {
    if (!ACCESS_ID || !TOKEN) {
        window.location.href = "https://jdk88a.com/login";
    } else {
        alert("Check-in complete!");
        // Optional: Send a POST request to record the check-in on the main site
    }
}
        
        document.addEventListener('DOMContentLoaded', () => {
    console.log('DOM fully loaded and parsed');
    fetchUserData(); // Call the function to fetch user data
});

        
    </script>
    
    <script src="script.js"></script>
</body>
</html>
